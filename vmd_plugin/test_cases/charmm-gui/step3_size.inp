* GENERATED BY CHARMM-GUI (http://www.charmm-gui.org) VERSION on Jan, 12. 2015.
* DETERMINE THE SYSTEM SIZE IN XY 
* 

DIMENS CHSIZE 2000000
!DIMENS CHSIZE 1000000

! Read topology and parameter files
stream toppar.str

set toparea = 0
set botarea = 0
set protZmax = 0
set protZmin = 0

set BOXTYPE = rect
set Alpha = 90.0
set Beta  = 90.0
set Gamma = 90.0

set liptoparea = 5504
set lipbotarea = 5464
set nliptop    = 81
set nlipbot    = 80

calc LXYtop = sqrt( @liptoparea + @toparea )
calc LXYbot = sqrt( @lipbotarea + @botarea )
calc LXY    = ( @LXYtop + @LXYbot ) / 2

! allow 5% difference along X and Y
calc XvsY = 1
if XvsY .lt. 1.05 if XvsY .gt. 0.95 calc XvsY = 1
calc B = sqrt( @LXY * @LXY / @XvsY )
calc A = @XvsY * @B

set XTLtype = ORTHorhombic
if A .eq. @B set XTLtype = TETRagonal

! Z value determination
calc lipboxZhalf = 17

if protZmax .lt.  @lipboxZhalf set protZmax =  @lipboxZhalf
if protZmin .gt. -@lipboxZhalf set protZmin = -@lipboxZhalf

! water layer from protein top and bottom
calc wboxZ = 22.5

calc propzup = @protZmax + @wboxZ
calc propzdn = @protZmin - @wboxZ

calc watZup = 0
calc watZdn = 0
if propzup .ge.  @lipboxZhalf calc watZup =   @propzup - @lipboxZhalf
if propzdn .lt. -@lipboxZhalf calc watZdn = - @propzdn - @lipboxZhalf

calc boxsizeZ = @lipboxZhalf * 2 + @watZup + @watZdn
calc zcen = ( @watZup - @watZdn ) / 2.0

calc watboxZ = @watZup
if watZup .lt. @watZdn calc watboxZ = @watZdn

stream step3_nlipids_upper.prm
stream step3_nlipids_lower.prm

calc ncharge = 0 
calc ncharge = @ncharge + -1 * ( @ndlpatop + @ndlpabot ) 
calc ncharge = @ncharge + -1 * ( @ndmpatop + @ndmpabot ) 
calc ncharge = @ncharge + -1 * ( @ndppatop + @ndppabot ) 
calc ncharge = @ncharge + -1 * ( @ndspatop + @ndspabot ) 
calc ncharge = @ncharge + -1 * ( @npopatop + @npopabot ) 
calc ncharge = @ncharge + -1 * ( @nplpatop + @nplpabot ) 
calc ncharge = @ncharge + -1 * ( @nsopatop + @nsopabot ) 
calc ncharge = @ncharge + -1 * ( @nslpatop + @nslpabot ) 
calc ncharge = @ncharge + -1 * ( @ndxpatop + @ndxpabot ) 
calc ncharge = @ncharge + -1 * ( @nyopatop + @nyopabot ) 
calc ncharge = @ncharge + -1 * ( @ndopatop + @ndopabot ) 
calc ncharge = @ncharge + -1 * ( @ndgpatop + @ndgpabot ) 
calc ncharge = @ncharge + -1 * ( @ndepatop + @ndepabot ) 
calc ncharge = @ncharge + -1 * ( @ndnpatop + @ndnpabot ) 
calc ncharge = @ncharge + -1 * ( @ndlpgtop + @ndlpgbot ) 
calc ncharge = @ncharge + -1 * ( @ndmpgtop + @ndmpgbot ) 
calc ncharge = @ncharge + -1 * ( @ndppgtop + @ndppgbot ) 
calc ncharge = @ncharge + -1 * ( @ndspgtop + @ndspgbot ) 
calc ncharge = @ncharge + -1 * ( @npspgtop + @npspgbot ) 
calc ncharge = @ncharge + -1 * ( @npopgtop + @npopgbot ) 
calc ncharge = @ncharge + -1 * ( @nplpgtop + @nplpgbot ) 
calc ncharge = @ncharge + -1 * ( @nsopgtop + @nsopgbot ) 
calc ncharge = @ncharge + -1 * ( @nslpgtop + @nslpgbot ) 
calc ncharge = @ncharge + -1 * ( @ndxpgtop + @ndxpgbot ) 
calc ncharge = @ncharge + -1 * ( @ndopgtop + @ndopgbot ) 
calc ncharge = @ncharge + -1 * ( @ndgpgtop + @ndgpgbot ) 
calc ncharge = @ncharge + -1 * ( @ndepgtop + @ndepgbot ) 
calc ncharge = @ncharge + -1 * ( @ndnpgtop + @ndnpgbot ) 
calc ncharge = @ncharge + -1 * ( @ndlpstop + @ndlpsbot ) 
calc ncharge = @ncharge + -1 * ( @ndmpstop + @ndmpsbot ) 
calc ncharge = @ncharge + -1 * ( @ndppstop + @ndppsbot ) 
calc ncharge = @ncharge + -1 * ( @ndspstop + @ndspsbot ) 
calc ncharge = @ncharge + -1 * ( @npopstop + @npopsbot ) 
calc ncharge = @ncharge + -1 * ( @nplpstop + @nplpsbot ) 
calc ncharge = @ncharge + -1 * ( @nsopstop + @nsopsbot ) 
calc ncharge = @ncharge + -1 * ( @nslpstop + @nslpsbot ) 
calc ncharge = @ncharge + -1 * ( @ndxpstop + @ndxpsbot ) 
calc ncharge = @ncharge + -1 * ( @nyopstop + @nyopsbot ) 
calc ncharge = @ncharge + -1 * ( @ndopstop + @ndopsbot ) 
calc ncharge = @ncharge + -1 * ( @ndgpstop + @ndgpsbot ) 
calc ncharge = @ncharge + -1 * ( @ndepstop + @ndepsbot ) 
calc ncharge = @ncharge + -1 * ( @ndnpstop + @ndnpsbot ) 
calc ncharge = @ncharge + -1 * ( @ndmpitop + @ndmpibot ) 
calc ncharge = @ncharge + -3 * ( @ndmpi13top + @ndmpi13bot ) 
calc ncharge = @ncharge + -3 * ( @ndmpi14top + @ndmpi14bot ) 
calc ncharge = @ncharge + -3 * ( @ndmpi15top + @ndmpi15bot ) 
calc ncharge = @ncharge + -4 * ( @ndmpi24top + @ndmpi24bot ) 
calc ncharge = @ncharge + -4 * ( @ndmpi25top + @ndmpi25bot ) 
calc ncharge = @ncharge + -6 * ( @ndmpi33top + @ndmpi33bot ) 
calc ncharge = @ncharge + -6 * ( @ndmpi34top + @ndmpi34bot ) 
calc ncharge = @ncharge + -6 * ( @ndmpi35top + @ndmpi35bot ) 
calc ncharge = @ncharge + -1 * ( @npypitop + @npypibot ) 
calc ncharge = @ncharge + -1 * ( @npopitop + @npopibot ) 
calc ncharge = @ncharge + -3 * ( @npopi13top + @npopi13bot ) 
calc ncharge = @ncharge + -3 * ( @npopi14top + @npopi14bot ) 
calc ncharge = @ncharge + -3 * ( @npopi15top + @npopi15bot ) 
calc ncharge = @ncharge + -4 * ( @npopi24top + @npopi24bot ) 
calc ncharge = @ncharge + -4 * ( @npopi25top + @npopi25bot ) 
calc ncharge = @ncharge + -6 * ( @npopi33top + @npopi33bot ) 
calc ncharge = @ncharge + -6 * ( @npopi34top + @npopi34bot ) 
calc ncharge = @ncharge + -6 * ( @npopi35top + @npopi35bot ) 
calc ncharge = @ncharge + -1 * ( @nplpitop + @nplpibot ) 
calc ncharge = @ncharge + -3 * ( @nplpi13top + @nplpi13bot ) 
calc ncharge = @ncharge + -3 * ( @nplpi14top + @nplpi14bot ) 
calc ncharge = @ncharge + -3 * ( @nplpi15top + @nplpi15bot ) 
calc ncharge = @ncharge + -4 * ( @nplpi24top + @nplpi24bot ) 
calc ncharge = @ncharge + -4 * ( @nplpi25top + @nplpi25bot ) 
calc ncharge = @ncharge + -6 * ( @nplpi33top + @nplpi33bot ) 
calc ncharge = @ncharge + -6 * ( @nplpi34top + @nplpi34bot ) 
calc ncharge = @ncharge + -6 * ( @nplpi35top + @nplpi35bot ) 
calc ncharge = @ncharge + -1 * ( @npnpitop + @npnpibot ) 
calc ncharge = @ncharge + -3 * ( @npnpi13top + @npnpi13bot ) 
calc ncharge = @ncharge + -3 * ( @npnpi14top + @npnpi14bot ) 
calc ncharge = @ncharge + -3 * ( @npnpi15top + @npnpi15bot ) 
calc ncharge = @ncharge + -4 * ( @npnpi24top + @npnpi24bot ) 
calc ncharge = @ncharge + -4 * ( @npnpi25top + @npnpi25bot ) 
calc ncharge = @ncharge + -6 * ( @npnpi33top + @npnpi33bot ) 
calc ncharge = @ncharge + -6 * ( @npnpi34top + @npnpi34bot ) 
calc ncharge = @ncharge + -6 * ( @npnpi35top + @npnpi35bot ) 
calc ncharge = @ncharge + -1 * ( @nsapitop + @nsapibot ) 
calc ncharge = @ncharge + -3 * ( @nsapi13top + @nsapi13bot ) 
calc ncharge = @ncharge + -3 * ( @nsapi14top + @nsapi14bot ) 
calc ncharge = @ncharge + -3 * ( @nsapi15top + @nsapi15bot ) 
calc ncharge = @ncharge + -4 * ( @nsapi24top + @nsapi24bot ) 
calc ncharge = @ncharge + -4 * ( @nsapi25top + @nsapi25bot ) 
calc ncharge = @ncharge + -6 * ( @nsapi33top + @nsapi33bot ) 
calc ncharge = @ncharge + -6 * ( @nsapi34top + @nsapi34bot ) 
calc ncharge = @ncharge + -6 * ( @nsapi35top + @nsapi35bot ) 
calc ncharge = @ncharge + -1 * ( @ntmcl1top + @ntmcl1bot ) 
calc ncharge = @ncharge + -2 * ( @ntmcl2top + @ntmcl2bot ) 
calc ncharge = @ncharge + -1 * ( @npmcl1top + @npmcl1bot ) 
calc ncharge = @ncharge + -2 * ( @npmcl2top + @npmcl2bot ) 
calc ncharge = @ncharge + -2 * ( @npvcl2top + @npvcl2bot ) 
calc ncharge = @ncharge + -1 * ( @ntxcl1top + @ntxcl1bot ) 
calc ncharge = @ncharge + -2 * ( @ntxcl2top + @ntxcl2bot ) 
calc ncharge = @ncharge + -1 * ( @ntocl1top + @ntocl1bot ) 
calc ncharge = @ncharge + -2 * ( @ntocl2top + @ntocl2bot ) 
calc ncharge = @ncharge + -1 * ( @nloacl1top + @nloacl1bot ) 
calc ncharge = @ncharge + -2 * ( @nloacl2top + @nloacl2bot ) 
calc ncharge = @ncharge + -1 * ( @nloccl1top + @nloccl1bot ) 
calc ncharge = @ncharge + -2 * ( @nloccl2top + @nloccl2bot ) 
calc ncharge = @ncharge + -1 * ( @ntlcl1top + @ntlcl1bot ) 
calc ncharge = @ncharge + -2 * ( @ntlcl2top + @ntlcl2bot ) 
calc ncharge = @ncharge + -1 * ( @nlnccl1top + @nlnccl1bot ) 
calc ncharge = @ncharge + -2 * ( @nlnccl2top + @nlnccl2bot ) 
calc ncharge = @ncharge + -1 * ( @nlnacl1top + @nlnacl1bot ) 
calc ncharge = @ncharge + -2 * ( @nlnacl2top + @nlnacl2bot ) 
calc ncharge = @ncharge + -1 * ( @nlndcl1top + @nlndcl1bot ) 
calc ncharge = @ncharge + -2 * ( @nlndcl2top + @nlndcl2bot ) 
calc ncharge = @ncharge + -1 * ( @nlnbcl1top + @nlnbcl1bot ) 
calc ncharge = @ncharge + -2 * ( @nlnbcl2top + @nlnbcl2bot ) 
calc ncharge = @ncharge + -1 * ( @nsapatop + @nsapabot ) 
calc ncharge = @ncharge + -1 * ( @nsapgtop + @nsapgbot ) 
calc ncharge = @ncharge + -1 * ( @nsapstop + @nsapsbot ) 
calc ncharge = @ncharge + -1 * ( @nsdpatop + @nsdpabot ) 
calc ncharge = @ncharge + -1 * ( @nsdpgtop + @nsdpgbot ) 
calc ncharge = @ncharge + -1 * ( @nsdpstop + @nsdpsbot ) 
calc ncharge = @ncharge + -1 * ( @ndapatop + @ndapabot ) 
calc ncharge = @ncharge + -1 * ( @ndapgtop + @ndapgbot ) 
calc ncharge = @ncharge + -1 * ( @ndapstop + @ndapsbot ) 
calc ncharge = @ncharge + -1 * ( @npmpgtop + @npmpgbot ) 
calc ncharge = @ncharge + -1 * ( @npvpgtop + @npvpgbot )

open write card  unit 51 name step3_size.str
write title unit 51
* set BOXtype  = @BOXtype
* set XTLtype  = @XTLtype
* set A        = @A
* set B        = @B
* set C        = @boxsizez
* set Alpha    = @Alpha
* set Beta     = @Beta
* set Gamma    = @Gamma
* set Zcen     = @zcen
* set NLIPTOP  = @nliptop
* set NLIPBOT  = @nlipbot
* set watboxZ  = @watboxZ
* set ncharge  = @ncharge
*

stop